# TW-Pulse-CLI ä½¿ç”¨èªªæ˜

> å°ç£è‚¡ç¥¨å¸‚å ´åˆ†æ CLI å·¥å…· - å®‰è£èˆ‡ä½¿ç”¨æŒ‡å—

---

## ç›®éŒ„

1. [å®‰è£](#å®‰è£)
2. [è¨­å®š](#è¨­å®š)
3. [å•Ÿå‹•](#å•Ÿå‹•)
4. [å‘½ä»¤](#å‘½ä»¤)
5. [ç¯„ä¾‹](#ç¯„ä¾‹)
6. [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

---

## å®‰è£

### ç’°å¢ƒéœ€æ±‚

- Python 3.11+
- Git

### å®‰è£æ­¥é©Ÿ

```bash
# 1. è¤‡è£½å°ˆæ¡ˆ
git clone https://github.com/alingowangxr/TW-Pulse-CLI.git
cd TW-Pulse-CLI

# 2. å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv .venv

# 3. å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
.venv\Scripts\activate     # Windows
source .venv/bin/activate  # Linux/macOS

# 4. å®‰è£
pip install -e .
```

### ä½¿ç”¨ uv (æ›´å¿«é€Ÿ)

```bash
pip install uv
uv pip install -e .
```

---

## è¨­å®š

### ç’°å¢ƒè®Šæ•¸

è¤‡è£½ç¯„ä¾‹æª”æ¡ˆï¼š
```bash
cp .env.example .env
```

ç·¨è¼¯ `.env` å¡«å…¥ API Keyï¼š

```env
# AI API Key (é¸æ“‡ä¸€å€‹æˆ–å¤šå€‹)
DEEPSEEK_API_KEY=your_key          # é è¨­ï¼Œè©³ç´°åˆ†æ
# GROQ_API_KEY=your_key            # å…è²»ï¼Œå¿«é€Ÿ
# GEMINI_API_KEY=your_key
# ANTHROPIC_API_KEY=your_key
# OPENAI_API_KEY=your_key

# FinMind API (æ³•äººå‹•å‘)
FINMIND_TOKEN=your_token

# é è¨­æ¨¡å‹
PULSE_AI__DEFAULT_MODEL=deepseek/deepseek-chat
```

### å–å¾— API Key

| Provider | ç¶²å€ | ç‰¹æ€§ |
|----------|------|------|
| DeepSeek | https://platform.deepseek.com/api-keys | é è¨­ï¼Œè©³ç´°åˆ†æ |
| Groq | https://console.groq.com/keys | å…è²»é¡åº¦ï¼Œå¿«é€Ÿ |
| Google | https://aistudio.google.com/apikey | å…è²»é¡åº¦æœ‰é™ |
| Anthropic | https://console.anthropic.com/ | ä»˜è²»ï¼Œé«˜å“è³ª |
| OpenAI | https://platform.openai.com/api-keys | ä»˜è²» |
| FinMind | https://finmindtrade.com/ | æ³•äººå‹•å‘æ•¸æ“š |

---

## å•Ÿå‹•

```bash
# é€²å…¥è™›æ“¬ç’°å¢ƒå¾Œ
pulse
```

æˆ–ç›´æ¥åŸ·è¡Œï¼š
```bash
python -m pulse.cli.app
```

### å¿«æ·éµ

| å¿«æ·éµ | åŠŸèƒ½ |
|--------|------|
| `Enter` | é€å‡ºè¨Šæ¯ |
| `Ctrl+C` | é€€å‡ºç¨‹å¼ |
| `Ctrl+L` | æ¸…é™¤å°è©± |
| `Escape` | é—œé–‰å‘½ä»¤é¢æ¿ |
| `Tab` | å°èˆªå‘½ä»¤é¸æ“‡ |
| `â†‘` `â†“` | ä¸Šä¸‹é¸æ“‡ |

---

## å‘½ä»¤

### åˆ†æå‘½ä»¤

| å‘½ä»¤ | åˆ¥å | èªªæ˜ | ç”¨æ³• |
|------|------|------|------|
| `/analyze` | `/a`, `/stock` | å®Œæ•´åˆ†æ | `/analyze 2330` |
| `/technical` | `/ta`, `/tech` | æŠ€è¡“åˆ†æ | `/technical 2330` |
| `/fundamental` | `/fa`, `/fund` | åŸºæœ¬é¢åˆ†æ | `/fundamental 2330` |
| `/institutional` | `/inst`, `/flow` | æ³•äººå‹•å‘ | `/institutional 2330` |
| `/chart` | `/c` | ç”¢ç”Ÿåœ–è¡¨ | `/chart 2330 3mo` |
| `/forecast` | `/pred`, `/predict` | åƒ¹æ ¼é æ¸¬ | `/forecast 2330 14 [fast\|full]` |
| `/compare` | `/cmp`, `/vs` | æ¯”è¼ƒè‚¡ç¥¨ | `/compare 2330 2454` |
| `/plan` | `/tp` | äº¤æ˜“è¨ˆç•« | `/plan 2330` |
| `/sapta` | `/premarkup` | é æ¼²åµæ¸¬ | `/sapta 2330` |
| `/index` | `/market` | å¤§ç›¤æŒ‡æ•¸ | `/index` |
| `/sector` | `/sec` | ç”¢æ¥­åˆ†æ | `/sector` |
| `/keltner` | `/kc` | è‚¯ç‰¹ç´é€šé“ç­–ç•¥ | `/keltner 2330` |
| `/happy-lines` | `/happy`, `/äº”ç·šè­œ`, `/hl` | æ¨‚æ´»äº”ç·šè­œåˆ†æ | `/happy-lines 2330` |

### ç¯©é¸å‘½ä»¤

| å‘½ä»¤ | åˆ¥å | èªªæ˜ | ç”¨æ³• |
|------|------|------|------|
| `/screen` | `/s`, `/filter` | è‚¡ç¥¨ç¯©é¸ | `/screen oversold` |
| `/smart-money` | `/tvb`, `/ä¸»åŠ›` | ä¸»åŠ›è¶³è·¡é¸è‚¡ | `/smart-money --tw50` |

### ç³»çµ±å‘½ä»¤

| å‘½ä»¤ | åˆ¥å | èªªæ˜ |
|------|------|------|
| `/models` | `/model`, `/m` | åˆ‡æ› AI æ¨¡å‹ |
| `/clear` | `/cls` | æ¸…é™¤å°è©± |
| `/help` | `/h`, `/?` | èªªæ˜ |
| `/exit` | `/quit`, `/q` | é€€å‡º |

### ç¯©é¸æ¢ä»¶

| æ¢ä»¶ | èªªæ˜ |
|------|------|
| `oversold` | RSI < 30 |
| `overbought` | RSI > 70 |
| `bullish` | MACD å¤šé ­ + ç«™ä¸Š SMA20 |
| `bearish` | MACD ç©ºé ­ |
| `breakout` | çªç ´å£“åŠ›ä½ + é‡å¢ |
| `momentum` | RSI 50-70 + MACD å¤šé ­ |
| `undervalued` | PE < 15 + ROE > 10% |
| `keltner_breakout` | è‚¯ç‰¹ç´é€šé“çªç ´ |
| `keltner_hold` | è‚¯ç‰¹ç´é€šé“æŒæœ‰ |
| `happy_oversold` | æ¨‚æ´»äº”ç·šè­œè¶…è·Œå€ (ç¬¬1ç·š) |
| `happy_overbought` | æ¨‚æ´»äº”ç·šè­œéç†±å€ (ç¬¬5ç·š) |
| `happy_cheap` | æ¨‚æ´»äº”ç·šè­œåä½å€ä»¥ä¸‹ (ç¬¬1-2ç·š) |
| `happy_expensive` | æ¨‚æ´»äº”ç·šè­œåé«˜å€ä»¥ä¸Š (ç¬¬4-5ç·š) |
| `rsi<30` | è‡ªè¨‚æ¢ä»¶ |
| `pe<15 and roe>10` | è¤‡åˆæ¢ä»¶ |

### Universe é¸é …

```bash
/screen oversold --universe=tw50     # å°ç£50 (50æª”)
/screen oversold --universe=listed   # ä¸Šå¸‚å…¬å¸ (1,067æª”)
/screen oversold --universe=otc      # ä¸Šæ«ƒå…¬å¸ (874æª”)
/screen oversold --universe=all      # å…¨éƒ¨ (1,941æª”)
```

### åŒ¯å‡º CSV

```bash
/screen oversold --export             # è‡ªå‹•ç”¢ç”Ÿæª”å
/screen rsi<30 --export=my_data.csv   # è‡ªè¨‚æª”å
```

åŒ¯å‡ºä½ç½®ï¼š`data/reports/screen_YYYYMMDD_HHMMSS.csv`

---

## ç­–ç•¥å›æ¸¬ç³»çµ±

### å¯ç”¨ç­–ç•¥

| ç­–ç•¥ Key | åç¨± | èªªæ˜ |
|----------|------|------|
| `farmerplanting` | é€²éšè¾²å¤«æ’­ç¨®è¡“ | åŸºæº–åƒ¹åŠ æ¸›ç¢¼ç­–ç•¥ï¼Œé©åˆè¶¨å‹¢è‚¡ç¥¨é•·æœŸæŒæœ‰ |
| `momentumbreakout` | å‹•é‡çªç ´ç­–ç•¥ | ADX å¼·è¶¨å‹¢ + MACD é»ƒé‡‘äº¤å‰ + æˆäº¤é‡ç¢ºèª |
| `macrossover` | å‡ç·šäº¤å‰ç­–ç•¥ | EMA9/EMA21 äº¤å‰ + MA50 è¶¨å‹¢éæ¿¾ |
| `bbsqueeze` | å¸ƒæ—å£“ç¸®ç­–ç•¥ | ä½æ³¢å‹•å£“ç¸®å¾Œçš„å‘ä¸Šçªç ´ |

### ç­–ç•¥å›æ¸¬æŒ‡ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç­–ç•¥
/strategy

# åŸ·è¡Œå›æ¸¬ï¼ˆ5å¹´æ­·å²æ•¸æ“šï¼‰
/strategy farmerplanting 2330 backtest
/strategy momentumbreakout 2330 backtest
/strategy macrossover 2330 backtest
/strategy bbsqueeze 2330 backtest
```

---

### å‹•é‡çªç ´ç­–ç•¥ (Momentum Breakout)

**é€²å ´æ¢ä»¶** (å…¨éƒ¨æ»¿è¶³):
- ADX > 25 (å¼·è¶¨å‹¢)
- MACD é»ƒé‡‘äº¤å‰ (MACD ä¸Šç©¿ä¿¡è™Ÿç·š)
- æˆäº¤é‡ > 20æ—¥å‡é‡ Ã— 1.5

**å‡ºå ´æ¢ä»¶** (ä»»ä¸€è§¸ç™¼):
- ADX < 20 (è¶¨å‹¢è½‰å¼±)
- MACD æ­»äº¡äº¤å‰
- ç§»å‹•åœåˆ© 15%

**åƒæ•¸**:
| åƒæ•¸ | é è¨­å€¼ | èªªæ˜ |
|------|--------|------|
| `adx_entry_threshold` | 25 | ADX é€²å ´é–€æª» |
| `adx_exit_threshold` | 20 | ADX å‡ºå ´é–€æª» |
| `volume_multiplier` | 1.5 | æˆäº¤é‡å€æ•¸ |
| `trailing_stop_pct` | 0.15 | ç§»å‹•åœåˆ© 15% |

**é¢¨éšªç·©è§£**: æˆäº¤é‡ç¢ºèª + ADX éæ¿¾å‡çªç ´

---

### å‡ç·šäº¤å‰ç­–ç•¥ (MA Crossover)

**é€²å ´æ¢ä»¶**:
- EMA9 ä¸Šç©¿ EMA21 (é»ƒé‡‘äº¤å‰)
- æ”¶ç›¤åƒ¹ > MA50 (è¶¨å‹¢éæ¿¾)

**å‡ºå ´æ¢ä»¶**:
- EMA9 ä¸‹ç©¿ EMA21 (æ­»äº¡äº¤å‰)
- æ”¶ç›¤åƒ¹ < MA50

**åƒæ•¸**:
| åƒæ•¸ | é è¨­å€¼ | èªªæ˜ |
|------|--------|------|
| `ema_fast` | 9 | å¿«é€Ÿ EMA é€±æœŸ |
| `ema_slow` | 21 | æ…¢é€Ÿ EMA é€±æœŸ |
| `ma_filter` | 50 | è¶¨å‹¢éæ¿¾å‡ç·šé€±æœŸ |

**é¢¨éšªç·©è§£**: MA50 è¶¨å‹¢éæ¿¾æ¸›å°‘ç›¤æ•´æœŸé »ç¹äº¤æ˜“

---

### å¸ƒæ—å£“ç¸®ç­–ç•¥ (BB Squeeze)

**é€²å ´æ¢ä»¶**:
- å¸¶å¯¬æ”¶ç¸®è‡³ 20% ç™¾åˆ†ä½ä»¥ä¸‹ (å£“ç¸®åµæ¸¬)
- å¸¶å¯¬é–‹å§‹æ“´å¼µ
- æ”¶ç›¤åƒ¹çªç ´ä¸Šè»Œ (æ–¹å‘æ€§çªç ´)

**å‡ºå ´æ¢ä»¶**:
- åƒ¹æ ¼å›æ­¸ä¸­è»Œ
- åƒ¹æ ¼è§¸åŠä¸‹è»Œ

**åƒæ•¸**:
| åƒæ•¸ | é è¨­å€¼ | èªªæ˜ |
|------|--------|------|
| `squeeze_percentile` | 20 | å£“ç¸®åˆ¤å®šç™¾åˆ†ä½ |
| `lookback_period` | 20 | å¸¶å¯¬æ­·å²å›é¡§æœŸé–“ |

**é¢¨éšªç·©è§£**: åªåšå‘ä¸Šçªç ´ï¼Œé¿å…å£“ç¸®å¾Œç„¡æ–¹å‘

---

## Smart Money Screener

### `/smart-money` - ä¸»åŠ›è¶³è·¡é¸è‚¡

åŸºæ–¼ **Trend/Volume/Bias** ä¸‰ç¶­åº¦çš„ä¸»åŠ›å¸ç±Œé¸è‚¡ã€‚

### è©•åˆ†é‚è¼¯ (100åˆ†åˆ¶)

| ç¶­åº¦ | æ¬Šé‡ | æ¢ä»¶ | åˆ†æ•¸ |
|------|------|------|------|
| è¶¨å‹¢å‹æ…‹ | 40% | æ¥µè‡´å£“ç¸® (BBå¯¬åº¦<15%+10å¤©) | +25 |
| | | å¸¶é‡çªç ´ | +15 |
| é‡èƒ½Kç·š | 35% | OBV å…ˆè¡Œå‰µé«˜ | +15 |
| | | æ”»æ“Šé‡ (>2x MV5) | +10 |
| | | Kç·šéœ¸æ°£ (å¯¦é«”>70%) | +10 |
| ä¹–é›¢ä½éš | 25% | é»ƒé‡‘èµ·æ¼² (ä¹–é›¢5-10%) | +15 |
| | | ç«™ä¸Šå¹´ç·š | +10 |

### ä½¿ç”¨æ–¹å¼

```bash
/smart-money              # TW50 (50æª”, ~10ç§’)
/smart-money --tw50       # å°ç£50
/smart-money --listed     # ä¸Šå¸‚å…¬å¸ (1,067æª”, ~2åˆ†é˜)
/smart-money --otc        # ä¸Šæ«ƒå…¬å¸ (874æª”, ~90ç§’)
/smart-money --all        # å…¨éƒ¨å¸‚å ´ (1,941æª”, ~4åˆ†é˜)
/smart-money --fast       # å¿«é€Ÿæ¨¡å¼ (è·³éOBV)
/smart-money --min=60     # é«˜åˆ†ç¯©é¸
/smart-money --limit=10   # é™åˆ¶æ•¸é‡
```

### è¼¸å‡ºç¯„ä¾‹

```
ä¸»åŠ›è¶³è·¡é¸è‚¡ (å°ç£50, min_score=40)
---
æ‰¾åˆ° 3 æª”ç¬¦åˆæ¢ä»¶çš„è‚¡ç¥¨:

[â˜…  ] 2317    48.0/100  é´»æµ·
    NT$224 (-2.61%)  ä¹–é›¢MA20:-2.8%  é‡æ¯”:1.4x
    ä¿¡è™Ÿ: å¸ƒæ—æ”¶ç¸® BB:7.5 | OBVæ•´ç† | é•·ç´…100%

åœ–ä¾‹: â˜…â˜…â˜…=80+å¼·å‹¢  â˜…â˜…=60-79å¸ç±Œ  â˜…=40-59è§€å¯Ÿ
```

åˆ¥åï¼š`/tvb`, `/ä¸»åŠ›`

---

## Keltner Channel Strategy

### `/keltner` - è‚¯ç‰¹ç´é€šé“ç­–ç•¥

**è‚¯ç‰¹ç´é€šé“ (Keltner Channel)** æ˜¯ä¸€ç¨®æ³¢å‹•æ€§é€šé“æŒ‡æ¨™ï¼Œç”± Chester Keltner åœ¨ 1960 å¹´ä»£é–‹ç™¼ã€‚
å®ƒä½¿ç”¨ EMA ä½œç‚ºä¸­è»Œï¼ŒATR çš„å€æ•¸ä½œç‚ºä¸Šä¸‹è»Œï¼Œèˆ‡å¸ƒæ—é€šé“ç›¸æ¯”å°åƒ¹æ ¼è®Šå‹•çš„åæ‡‰æ›´å¹³æ»‘ã€‚

### ç­–ç•¥ä¿¡è™Ÿ

| ä¿¡è™Ÿ | é¡è‰² | èªªæ˜ |
|------|------|------|
| **BUY** | ğŸŸ¢ ç¶ è‰² | åƒ¹æ ¼çªç ´ä¸Šè»Œ + EMA å¤šé ­æ’åˆ— |
| **HOLD** | ğŸŸ¡ é»ƒè‰² | åƒ¹æ ¼åœ¨é€šé“å…§ (ä¸­è»Œèˆ‡ä¸Šè»Œä¹‹é–“) |
| **SELL** | ğŸ”´ ç´…è‰² | åƒ¹æ ¼è·Œç ´ä¸­è»Œ |
| **WATCH** | âšª ç™½è‰² | æ¥è¿‘ä¸Šè»Œæˆ–æˆäº¤é‡ä¸è¶³ |

### ç­–ç•¥åƒæ•¸

```python
# é è¨­åƒæ•¸
min_avg_volume = 3_000_000   # æœ€å°æ—¥å‡æˆäº¤é‡ (è‚¡)
ema_periods = (9, 21, 55)    # EMA é€±æœŸç”¨æ–¼è¶¨å‹¢ç¢ºèª
atr_multiplier = 2.0         # ATR å€æ•¸
atr_period = 10              # ATR é€±æœŸ
rebalance_frequency = "biweekly"  # æ›è‚¡é »ç‡
```

### ç­–ç•¥é‚è¼¯

#### è²·é€²æ¢ä»¶ (BUY)
- æ”¶ç›¤åƒ¹ **>=** è‚¯ç‰¹ç´ä¸Šè»Œ (kc_upper)
- EMA å¤šé ­æ’åˆ— (EMA 9 > EMA 21 > EMA 55)
- æ—¥å‡æˆäº¤é‡ **>=** 3,000,000 è‚¡

#### æŒæœ‰æ¢ä»¶ (HOLD)
- æ”¶ç›¤åƒ¹åœ¨ **è‚¯ç‰¹ç´ä¸­è»Œ** èˆ‡ **è‚¯ç‰¹ç´ä¸Šè»Œ** ä¹‹é–“
- æˆ–æ”¶ç›¤åƒ¹ç¶­æŒåœ¨è‚¯ç‰¹ç´ä¸Šè»Œä¹‹ä¸Š

#### è³£å‡ºæ¢ä»¶ (SELL)
- æ”¶ç›¤åƒ¹ **è·Œç ´** è‚¯ç‰¹ç´ä¸­è»Œ (ä¿å®ˆæ­¢æ)
- æˆ–æ”¶ç›¤åƒ¹è·Œç ´è‚¯ç‰¹ç´ä¸Šè»Œ (ç©æ¥µæ­¢æ)

### ä½¿ç”¨æ–¹å¼

```bash
# åˆ†æå–®ä¸€è‚¡ç¥¨
/keltner 2330

# ç¯©é¸è²·é€²ä¿¡è™Ÿ
/keltner --buy

# ç¯©é¸æŒæœ‰ä¿¡è™Ÿ (ç”¨æ–¼å€‰ä½æª¢è¦–)
/keltner --hold

# ç¯©é¸è³£å‡ºä¿¡è™Ÿ (ç”¨æ–¼å€‰ä½æª¢è¦–)
/keltner --sell

# è‡ªè¨‚æœ€å°æˆäº¤é‡
/keltner --min-volume=5000000

# è‡ªè¨‚è‚¡ç¥¨æ¸…å–®
/keltner 2330 2303 2379
```

### Python API

```python
from pulse.core.strategies.keltner_channel_strategy import (
    KeltnerChannelStrategy,
    screen_keltner_breakout,
)

# æ–¹å¼ 1: å®Œæ•´ç­–ç•¥ç‰©ä»¶
strategy = KeltnerChannelStrategy()

# è²·é€²ä¿¡è™Ÿç¯©é¸
buy_signals = await strategy.screen_buy_signals(limit=20)

# æŒæœ‰ä¿¡è™Ÿç¯©é¸
hold_signals = await strategy.screen_hold_signals(limit=20)

# è³£å‡ºä¿¡è™Ÿç¯©é¸
sell_signals = await strategy.screen_sell_signals(limit=20)

# å®Œæ•´ç¯©é¸ (å«è§€å¯Ÿåå–®)
all_signals = await strategy.screen(include_watchlist=True)

# é¡¯ç¤ºçµæœ
for r in buy_signals:
    print(f"{r.ticker}: {r.signal.value} @ ${r.price}")
    print(f"  KC Upper: {r.kc_upper:.2f}, KC Middle: {r.kc_middle:.2f}")
    print(f"  EMA: {r.ema_9:.2f} > {r.ema_21:.2f} > {r.ema_55:.2f}")
    print(f"  æˆäº¤é‡: {r.avg_volume:,}")

# æ–¹å¼ 2: å¿«é€Ÿç¯©é¸
quick_results = await screen_keltner_breakout(universe=["2330", "2303"], limit=10)
```

### è¼¸å‡ºç¯„ä¾‹

```
è‚¯ç‰¹ç´é€šé“ç­–ç•¥ (BUY ä¿¡è™Ÿ)
---
æ‰¾åˆ° 5 æª”ç¬¦åˆæ¢ä»¶çš„è‚¡ç¥¨:

[BUY] 2330  å°ç©é›»
    åƒ¹æ ¼: NT$1,025 (+2.5%)
    KC Upper: 1,020.0 | KC Middle: 980.0 | KC Lower: 940.0
    EMA: 1,000 > 990 > 970 (å¤šé ­æ’åˆ—)
    æˆäº¤é‡: 5,234,567 (1.3x å¹³å‡)
    è·é›¢ä¸Šè»Œ: +0.5%

[BUY] 2303  è¯é›»
    åƒ¹æ ¼: NT$52.5 (+1.8%)
    KC Upper: 51.8 | KC Middle: 49.2 | KC Lower: 46.6
    EMA: 52.1 > 50.5 > 48.9 (å¤šé ­æ’åˆ—)
    æˆäº¤é‡: 3,456,789 (1.1x å¹³å‡)
    è·é›¢ä¸Šè»Œ: +1.4%

---
ç¯©é¸æ¢ä»¶:
  - åƒ¹æ ¼ >= è‚¯ç‰¹ç´ä¸Šè»Œ
  - EMA å¤šé ­æ’åˆ— (EMA 9 > EMA 21 > EMA 55)
  - æ—¥å‡æˆäº¤é‡ >= 3,000,000 è‚¡
```

### è‚¯ç‰¹ç´é€šé“ vs å¸ƒæ—é€šé“

| ç‰¹æ€§ | è‚¯ç‰¹ç´é€šé“ | å¸ƒæ—é€šé“ |
|------|------------|----------|
| ä¸­è»Œ | EMA (20) | SMA (20) |
| å¸¶å¯¬ | ATR Ã— å€æ•¸ | æ¨™æº–å·® Ã— å€æ•¸ |
| åæ‡‰ | æ›´å¹³æ»‘ | æ›´æ•æ„Ÿ |
| é©ç”¨ | è¶¨å‹¢ç¢ºèª | æ³¢å‹•æ€§æ¸¬é‡ |

### ç­–ç•¥å„ªå‹¢èˆ‡åŠ£å‹¢

#### å„ªå‹¢
- é †å‹¢äº¤æ˜“ï¼Œè¿½è¹¤è¶¨å‹¢
- æ˜ç¢ºçš„é€²å ´/å‡ºåœºè¦å‰‡
- æ¿¾é™¤å™ªéŸ³ï¼Œæ¸›å°‘å‡çªç ´
- é©åˆæ³¢æ®µè¡Œæƒ…

#### åŠ£å‹¢
- ç›¤æ•´å¸‚å ´å¯èƒ½ç”¢ç”Ÿå‡ä¿¡è™Ÿ
- åƒæ•¸éœ€è¦å„ªåŒ–
- è¶¨å‹¢åè½‰æ™‚å¯èƒ½é€ æˆè¼ƒå¤§è™§æ
- ä¸é©åˆç•¶æ—¥æ²–éŠ·

### é¢¨éšªæ§åˆ¶å»ºè­°

1. **æˆäº¤é‡æ¿¾ç¶²**: æ’é™¤æ—¥å‡æˆäº¤é‡ < 3,000,000 è‚¡çš„è‚¡ç¥¨
2. **EMA ç¢ºèª**: åªåœ¨ EMA å¤šé ­æ’åˆ—æ™‚è²·é€²
3. **æ›è‚¡é »ç‡**: å…©é€±æª¢è¦–ä¸€æ¬¡ (Bi-weekly)
4. **æ­¢æç´€å¾‹**: è·Œç ´ä¸­è»Œç«‹å³æ­¢æ
5. **åˆ†æ•£æŠ•è³‡**: ä¸è¦æŠŠæ‰€æœ‰è³‡é‡‘æŠ•å…¥å–®ä¸€è‚¡ç¥¨

åˆ¥åï¼š`/kc`

---

## Happy Lines (æ¨‚æ´»äº”ç·šè­œ)

### `/happy-lines` - æ¨‚æ´»äº”ç·šè­œåˆ†æ

**æ¨‚æ´»äº”ç·šè­œ**æ˜¯ä¸€ç¨®åŸºæ–¼çµ±è¨ˆåˆ†ä½ˆçš„è‚¡åƒ¹ä½éšåˆ¤æ–·å·¥å…·ï¼Œé€éç§»å‹•å¹³å‡ç·šå’Œæ¨™æº–å·®è¨ˆç®—äº”æ¢é—œéµåƒ¹ä½ç·šï¼Œå°‡è‚¡åƒ¹åˆ†ç‚ºäº”å€‹å€åŸŸï¼Œå”åŠ©æŠ•è³‡äººåˆ¤æ–·é€²å‡ºå ´æ™‚æ©Ÿã€‚

### äº”ç·šè­œè¨ˆç®—é‚è¼¯

| ç·šä½ | åç¨± | è¨ˆç®—å…¬å¼ | æŠ•è³‡å»ºè­° |
|------|------|----------|----------|
| **ç¬¬5ç·š** | éç†±ç·š | ä¸­è»Œ + (æ¨™æº–å·® Ã— 2.0) | è€ƒæ…®æ¸›ç¢¼/åœåˆ© |
| **ç¬¬4ç·š** | åé«˜ç·š | ä¸­è»Œ + (æ¨™æº–å·® Ã— 1.0) | åˆ†æ‰¹ç²åˆ© |
| **ç¬¬3ç·š** | å¹³è¡¡ç·š | Næ—¥ç§»å‹•å¹³å‡ (é è¨­120æ—¥) | è§€æœ›ç­‰å¾… |
| **ç¬¬2ç·š** | åä½ç·š | ä¸­è»Œ - (æ¨™æº–å·® Ã— 1.0) | åˆ†æ‰¹å¸ƒå±€ |
| **ç¬¬1ç·š** | è¶…è·Œç·š | ä¸­è»Œ - (æ¨™æº–å·® Ã— 2.0) | è€ƒæ…®é€²å ´/åŠ ç¢¼ |

### ç­–ç•¥åƒæ•¸

```python
# é è¨­åƒæ•¸
period = 120                    # è¨ˆç®—é€±æœŸ (æ—¥)
min_avg_volume = 1_000_000      # æœ€å°æ—¥å‡æˆäº¤é‡ (è‚¡)
```

### é€±æœŸé¸æ“‡å»ºè­°

| é€±æœŸ | é©ç”¨é¢¨æ ¼ | èªªæ˜ |
|------|----------|------|
| 20æ—¥ | çŸ­ç·š | é©åˆç•¶æ²–æˆ–éš”æ—¥æ²– |
| 60æ—¥ | ä¸­ç·š | é©åˆæ³¢æ®µæ“ä½œ |
| **120æ—¥** | **é•·ç·š** | **é©åˆé•·æœŸæŠ•è³‡ (é è¨­)** |
| 240æ—¥ | å¹´ç·š | é©åˆåƒ¹å€¼æŠ•è³‡ |

### ç­–ç•¥é‚è¼¯

#### è²·é€²æ¢ä»¶
- è‚¡åƒ¹è™•æ–¼ **ç¬¬1ç·š** æˆ– **ç¬¬2ç·š** å€åŸŸ (è¶…è·Œ/åä½)
- è¶¨å‹¢ç‚ºå¤šé ­æˆ–ç›¤æ•´ (éç©ºé ­)
- æ—¥å‡æˆäº¤é‡ >= 1,000,000 è‚¡

#### è³£å‡ºæ¢ä»¶
- è‚¡åƒ¹çªç ´ **ç¬¬5ç·š** (éç†±å€)
- æˆ–è‚¡åƒ¹è·Œç ´ **ç¬¬3ç·š** ä¸”è¶¨å‹¢è½‰ç©º

#### æŒæœ‰æ¢ä»¶
- è‚¡åƒ¹åœ¨ **ç¬¬2-4ç·š** ä¹‹é–“
- æˆ–å·²é€²å ´ä¸”è¶¨å‹¢ä»åå¤š

### ä½¿ç”¨æ–¹å¼

```bash
# åˆ†æå–®ä¸€è‚¡ç¥¨ (é è¨­120æ—¥é€±æœŸ)
/happy-lines 2330

# ä½¿ç”¨ä¸åŒé€±æœŸ
/happy-lines 2330 period=60     # 60æ—¥é€±æœŸ
/happy-lines 2330 period=240    # 240æ—¥é€±æœŸ

# åˆ¥åä½¿ç”¨
/happy 2330
/äº”ç·šè­œ 2330
/hl 2330
```

### ç¯©é¸åŠŸèƒ½

```bash
# ç¯©é¸è¶…è·Œè‚¡ç¥¨ (ç¬¬1ç·šé™„è¿‘)
/screen happy_oversold

# ç¯©é¸éç†±è‚¡ç¥¨ (ç¬¬5ç·šé™„è¿‘)
/screen happy_overbought

# ç¯©é¸ä¾¿å®œè‚¡ç¥¨ (ç¬¬1-2ç·šå€é–“)
/screen happy_cheap

# ç¯©é¸æ˜‚è²´è‚¡ç¥¨ (ç¬¬4-5ç·šå€é–“)
/screen happy_expensive

# æŒ‡å®šè‚¡ç¥¨æ± 
/screen happy_cheap --universe=tw50
```

### Python API

```python
from pulse.core.strategies.happy_lines import (
    HappyLinesStrategy,
    HappyLinesSignal,
    screen_happy_lines,
)

# æ–¹å¼ 1: å®Œæ•´ç­–ç•¥ç‰©ä»¶
strategy = HappyLinesStrategy(period=120)

# è²·é€²ä¿¡è™Ÿç¯©é¸
buy_signals = await strategy.screen_buy_signals(limit=20)

# è³£å‡ºä¿¡è™Ÿç¯©é¸
sell_signals = await strategy.screen_sell_signals(limit=20)

# è¶…è·Œè‚¡ç¥¨ç¯©é¸
oversold = await strategy.screen_oversold(limit=20)

# éç†±è‚¡ç¥¨ç¯©é¸
overbought = await strategy.screen_overbought(limit=20)

# é¡¯ç¤ºçµæœ
for r in buy_signals:
    print(f"{r.ticker}: {r.signal.value} @ ${r.price}")
    print(f"  ä½éš: {r.zone.value} ({r.position_ratio:.1f}%)")
    print(f"  äº”ç·š: L1={r.line_1:.0f} L2={r.line_2:.0f} L3={r.line_3:.0f} L4={r.line_4:.0f} L5={r.line_5:.0f}")

# æ–¹å¼ 2: å¿«é€Ÿç¯©é¸
quick_results = await screen_happy_lines(
    universe=["2330", "2454"],
    limit=10,
    period=120,
    buy_signals_only=True
)
```

### è¼¸å‡ºç¯„ä¾‹

```
ã€æ¨‚æ´»äº”ç·šè­œåˆ†æ - 2330ã€‘

ç¬¬5ç·š (éç†±å€): 1,250
ç¬¬4ç·š (åé«˜å€): 1,150
ç¬¬3ç·š (å¹³è¡¡å€): 1,050 â† ä½ åœ¨é€™è£¡
ç¬¬2ç·š (åä½å€): 950
ç¬¬1ç·š (è¶…è·Œå€): 850

ã€åˆ†ææ‘˜è¦ã€‘
  ç•¶å‰åƒ¹æ ¼: NT$ 1,085
  ä½éšç™¾åˆ†æ¯”: 58.0%
  æ‰€åœ¨å€åŸŸ: å¹³è¡¡å€
  è¨ˆç®—é€±æœŸ: 120æ—¥

ã€äº¤æ˜“è¨Šè™Ÿã€‘
  è¶¨å‹¢: Sideways
  è¨Šè™Ÿ: NEUTRAL
```

### èˆ‡å…¶ä»–ç­–ç•¥çš„æ¯”è¼ƒ

| ç‰¹æ€§ | æ¨‚æ´»äº”ç·šè­œ | å¸ƒæ—é€šé“ | è‚¯ç‰¹ç´é€šé“ |
|------|------------|----------|------------|
| ä¸­è»Œ | ç§»å‹•å¹³å‡ | SMA | EMA |
| å¸¶å¯¬è¨ˆç®— | æ¨™æº–å·® | æ¨™æº–å·® | ATR |
| å€åŸŸåŠƒåˆ† | äº”å€‹æ˜ç¢ºå€åŸŸ | é€£çºŒåˆ†ä½ˆ | ä¸‰æ¢ç·š |
| é©ç”¨å ´æ™¯ | ä½éšåˆ¤æ–· | æ³¢å‹•æ€§æ¸¬é‡ | è¶¨å‹¢ç¢ºèª |
| ä¸»è¦ç”¨é€” | é€²å‡ºå ´æ™‚æ©Ÿ | è¶…è²·è¶…è³£ | é †å‹¢äº¤æ˜“ |

### ç­–ç•¥å„ªå‹¢èˆ‡åŠ£å‹¢

#### å„ªå‹¢
- **çµ±è¨ˆåŸºç¤**: åŸºæ–¼æ¨™æº–å·®ï¼Œå®¢è§€åˆ¤æ–·ä½éš
- **ç°¡å–®æ˜“æ‡‚**: äº”å€‹å€åŸŸæ˜ç¢ºï¼Œæ˜“æ–¼ç†è§£
- **é©åˆæ³¢æ®µ**: å°ä¸­é•·æœŸè¶¨å‹¢åˆ¤æ–·æº–ç¢º
- **å¯æ­é…ä½¿ç”¨**: å¯èˆ‡è¾²å¤«æ’­ç¨®è¡“ç­‰ç­–ç•¥çµåˆï¼Œä½œç‚ºåŠ æ¸›ç¢¼åƒè€ƒ

#### åŠ£å‹¢
- **é€±æœŸæ•æ„Ÿ**: ä¸åŒé€±æœŸçµè«–å¯èƒ½å·®ç•°è¼ƒå¤§
- **ç›¤æ•´å¤±çœŸ**: é•·æœŸç›¤æ•´å¾Œçªç ´å¯èƒ½ç”¢ç”Ÿå‡ä¿¡è™Ÿ
- **å–®ä¸€ç¶­åº¦**: åƒ…è€ƒæ…®åƒ¹æ ¼ï¼Œæœªè€ƒæ…®æˆäº¤é‡ç­‰å…¶ä»–å› ç´ 

### ä½¿ç”¨å»ºè­°

1. **é¸æ“‡åˆé©é€±æœŸ**: æ ¹æ“šæŠ•è³‡é¢¨æ ¼é¸æ“‡ 60æ—¥(æ³¢æ®µ) æˆ– 120æ—¥(é•·æœŸ)
2. **æ­é…è¶¨å‹¢ç¢ºèª**: çµåˆ EMA æˆ– MACD ç¢ºèªè¶¨å‹¢æ–¹å‘
3. **åˆ†æ‰¹æ“ä½œ**: åœ¨ç¬¬1-2ç·šåˆ†æ‰¹è²·å…¥ï¼Œç¬¬4-5ç·šåˆ†æ‰¹è³£å‡º
4. **è¨­å®šåœæ**: è·Œç ´ç¬¬1ç·šä¸”è¶¨å‹¢è½‰ç©ºæ™‚è€ƒæ…®åœæ
5. **çµåˆåŸºæœ¬é¢**: ä½ä¼°å€+å¥½åŸºæœ¬é¢ = æ›´å¥½çš„æŠ•è³‡æ©Ÿæœƒ

åˆ¥åï¼š`/happy`, `/äº”ç·šè­œ`, `/hl`

---

## åƒ¹æ ¼é æ¸¬ (AutoTS)

### `/forecast` - AI åƒ¹æ ¼é æ¸¬

åŸºæ–¼ **AutoTS** (M6 é æ¸¬ç«¶è³½å† è») çš„å¤šæ¨¡å‹è‡ªå‹•é¸æ“‡é æ¸¬å¼•æ“ï¼Œæ”¯æ´å¿«é€Ÿèˆ‡å®Œæ•´å…©ç¨®æ¨¡å¼ã€‚

### é æ¸¬æ¨¡å¼

| æ¨¡å¼ | èªªæ˜ | é ä¼°æ™‚é–“ |
|------|------|----------|
| **fast** (é è¨­) | `superfast` æ¨¡å‹æ¸…å–®ï¼Œ1 ä»£æ¼”åŒ–ï¼Œ1 æ¬¡é©—è­‰ | ~18 ç§’ |
| **full** | `superfast` æ¨¡å‹æ¸…å–®ï¼Œ3 ä»£æ¼”åŒ–ï¼Œ2 æ¬¡é©—è­‰ | ~30 ç§’ |

### ä½¿ç”¨æ–¹å¼

```bash
# å¿«é€Ÿæ¨¡å¼ (é è¨­ 7 å¤©)
/forecast 2330

# æŒ‡å®šå¤©æ•¸
/forecast 2330 14

# å®Œæ•´æ¨¡å¼
/forecast 2330 full
/forecast 2330 14 full

# é †åºä¸æ‹˜
/forecast 2330 full 14
```

### æ¨¡å‹é¸æ“‡

AutoTS æœƒè‡ªå‹•å¾ä»¥ä¸‹æ¨¡å‹ä¸­é¸æ“‡æœ€ä½³é æ¸¬æ¨¡å‹ï¼š

| æ¨¡å‹ | èªªæ˜ |
|------|------|
| GLS | å»£ç¾©æœ€å°å¹³æ–¹æ³• |
| ETS | æŒ‡æ•¸å¹³æ»‘æ³• |
| LastValueNaive | æœ€å¾Œå€¼å»¶ä¼¸ |
| AverageValueNaive | å¹³å‡å€¼å»¶ä¼¸ |
| SeasonalNaive | å­£ç¯€æ€§å»¶ä¼¸ |
| SeasonalityMotif | å­£ç¯€æ€§æ¨¡å¼åŒ¹é… |
| SectionalMotif | å€æ®µæ¨¡å¼åŒ¹é… |
| BasicLinearModel | åŸºæœ¬ç·šæ€§æ¨¡å‹ |

### è¼¸å‡ºç¯„ä¾‹

```
=== åƒ¹æ ¼é æ¸¬: 2330 (7å¤©) ===

æ¨¡å¼: å¿«é€Ÿæ¨¡å¼
æ¨¡å‹: GLS

ç¾åƒ¹: NT$ 1,025.00
ç›®æ¨™åƒ¹: NT$ 1,042.00
é æœŸæ¼²è·Œ: +1.66%

è¶¨å‹¢: + ä¸Šæ¼²
æ”¯æ’ä½: NT$ 1,010.00
å£“åŠ›ä½: NT$ 1,055.00
ä¿¡å¿ƒåº¦: [########--] 78%

åœ–è¡¨å·²å„²å­˜: charts/forecast_2330_20260208.png
```

### Fallback æ©Ÿåˆ¶

è‹¥ AutoTS æœªå®‰è£æˆ–åŸ·è¡Œå¤±æ•—ï¼Œç³»çµ±æœƒè‡ªå‹•é€€å› **MA Extrapolation**ï¼ˆç§»å‹•å¹³å‡å¤–æ¨æ³•ï¼‰ï¼Œä¿¡å¿ƒåº¦å›ºå®šç‚º 50%ã€‚

### è‡ªç„¶èªè¨€æ”¯æ´

åœ¨ Smart Agent æ¨¡å¼ä¸‹ï¼Œå¯ä½¿ç”¨è‡ªç„¶èªè¨€è§¸ç™¼é æ¸¬ï¼š

```
> é æ¸¬ 2330
> å®Œæ•´é æ¸¬ 2330     â†’ è‡ªå‹•ä½¿ç”¨ full æ¨¡å¼
> è©³ç´°é æ¸¬å°ç©é›»    â†’ è‡ªå‹•ä½¿ç”¨ full æ¨¡å¼
```

åˆ¥åï¼š`/pred`, `/predict`

---

## SAPTA é æ¼²åµæ¸¬

### `/sapta` - é æ¼²ä¿¡è™Ÿæª¢æ¸¬

**SAPTA** (System for Analyzing Pre-markup Technical Accumulation) - åŸºæ–¼æ©Ÿå™¨å­¸ç¿’çš„é æ¼²åµæ¸¬å¼•æ“ã€‚

### ç‹€æ…‹ç­‰çº§

| ç‹€æ…‹ | åˆ†æ•¸ | æ„ç¾© |
|------|------|------|
| **PRE-MARKUP** | >= 47 | æº–å‚™çªç ´ |
| **SIAP** | >= 35 | æ¥è¿‘å°±ç·’ |
| **WATCHLIST** | >= 24 | æ—©æœŸå¸ç±Œ |
| **SKIP** | < 24 | ç„¡ä¿¡è™Ÿ |

### ä½¿ç”¨æ–¹å¼

```bash
/sapta 2330                 # å–®ä¸€è‚¡ç¥¨
/sapta 2330 --detailed      # è©³ç´°åˆ†æ
/sapta chart 2330           # ç”¢ç”Ÿåœ–è¡¨
/sapta scan                 # æƒæ TW50
/sapta scan --listed        # æƒæä¸Šå¸‚å…¬å¸
```

### åœ–è¡¨è¼¸å‡º

```bash
/sapta chart 2330           # åŸºæœ¬åœ–è¡¨
/sapta chart 2330 --detailed # è©³ç´°åˆ†æåœ–
```

åœ–è¡¨å„²å­˜ï¼š`charts/sapta_{TICKER}_{YYYYMMDD}.png`

---

## ç¯„ä¾‹

### åŸºæœ¬åˆ†æ

```
> åˆ†æ 2330
> å°ç©é›»æŠ€è¡“é¢å¦‚ä½•ï¼Ÿ
> æ¯”è¼ƒ 2330 å’Œ 2317
```

### ç¯©é¸è‚¡ç¥¨

```
> æ‰¾å‡ºè¶…è³£çš„è‚¡ç¥¨
> æ‰¾ RSI < 30 çš„è‚¡ç¥¨
> ç¯©é¸çªç ´è‚¡ç¥¨
```

### äº¤æ˜“ç›¸é—œ

```
> å¹« 2330 å»ºç«‹äº¤æ˜“è¨ˆç•«
> æª¢æŸ¥ 2303 çš„æ½›åœ¨è²·é»
```

### SAPTA

```
> æ‰¾é æ¼²è‚¡ç¥¨
> æ‰¾æº–å‚™çªç ´çš„è‚¡ç¥¨
> æƒæå…¨å¸‚å ´é æ¼²è‚¡
```

---

## å¸¸è¦‹å•é¡Œ

### Q1: æ²’æœ‰ API Key æ€éº¼è¾¦ï¼Ÿ

**æ¨è–¦ Groq (å…è²»ä¸”å¿«é€Ÿ)ï¼š**
1. è¨ªå• https://console.groq.com/keys
2. è¨»å†Šä¸¦å»ºç«‹ API Key
3. è¨­å®š `GROQ_API_KEY` ç’°å¢ƒè®Šæ•¸

### Q2: Rate Limit æ€éº¼è¾¦ï¼Ÿ

```bash
# åˆ‡æ›åˆ°å…¶ä»– Provider
export GROQ_API_KEY="your_groq_key"
export PULSE_AI__DEFAULT_MODEL="groq/llama-3.3-70b-versatile"
```

### Q3: å¦‚ä½•åˆ‡æ› AI æ¨¡å‹ï¼Ÿ

```bash
# æ–¹æ³•1: ä½¿ç”¨å‘½ä»¤
/models

# æ–¹æ³•2: ç’°å¢ƒè®Šæ•¸
export PULSE_AI__DEFAULT_MODEL="groq/llama-3.3-70b-versatile"

# æ–¹æ³•3: ç·¨è¼¯ .env
PULSE_AI__DEFAULT_MODEL=deepseek/deepseek-chat
```

### Q4: æ³•äººå‹•å‘æ²’æœ‰æ•¸æ“šï¼Ÿ

ç¢ºèªå·²è¨­å®š `FINMIND_TOKEN`ï¼š
- è¨ªå• https://finmindtrade.com/ è¨»å†Š
- å–å¾— Token å¡«å…¥ `.env`

### Q5: CLI æ²’æœ‰å›æ‡‰ï¼Ÿ

1. æª¢æŸ¥ç¶²è·¯é€£ç·š
2. ç¢ºèª API Key æ­£ç¢º
3. ä½¿ç”¨ `/clear` æ¸…é™¤å°è©±
4. æª¢æŸ¥æ—¥èªŒï¼š`data/logs/pulse.log`

### Q6: æ•¸æ“šæº

| æ•¸æ“šæº | ç”¨é€” |
|--------|------|
| **FinMind** | æ³•äººå‹•å‘ã€èè³‡èåˆ¸ã€åŸºæœ¬é¢ |
| **Yahoo Finance** | è‚¡åƒ¹ã€æŠ€è¡“æŒ‡æ¨™ |
| **Fugle** | å³æ™‚å ±åƒ¹ã€52é€±é«˜ä½ |

---

**æœ€å¾Œæ›´æ–°**: 2026-02-08 (v0.4.1 - AutoTS é æ¸¬å¼•æ“ï¼Œæ”¯æ´å¿«é€Ÿ/å®Œæ•´æ¨¡å¼)
